#include<bits/stdc++.h>

using namespace std;
int main()
{

    string s[4];int o=0,x=0;
    for(int i=0;i<3;i++)
    {
        for(int j=0;j<3;j++)
            cin>>s[i][j];
    }
    for(int i=0;i<3;i++)
    {
        for(int j=0;j<3;j++)
            {
                if(s[i][j]=='0')
                {
                    o++;
                }
                if(s[i][j]=='X')
                {
                    x++;
                }
            }
    }
    if(x<o)
    {
        cout<<"illegal\n";

    }
    else if(x>o)
    {
        cout<<"second\n";
    }
    else if(x<o && abs(x-o)==1)
    {
        cout<<"first\n";
    }
    else if(x==o)
    {
        cout<<"draw\n";
    }
    else
    {
        if((s[0][0]=='X' && s[0][1]=='X' && s[0][2]=='X') || (s[1][0]=='X' && s[1][1]=='X' && s[1][2]=='X') || (s[2][0]=='X' && s[2][1]=='X' && s[2][2]=='X') || (s[0][0]=='X' && s[1][1]=='X' && s[2][2]=='X') || (s[0][2]=='X' && s[1][1]=='X' && s[2][0]=='X') || (s[0][0]=='X' && s[1][0]=='X' && s[2][0]=='X') || (s[0][1]=='X' && s[1][1]=='X' && s[2][1]=='X') || (s[0][2]=='X' && s[1][2]=='X' && s[2][2]=='X'))
        {
            cout<<"the first player won\n";
        }
        if((s[0][0]=='0' && s[0][1]=='0' && s[0][2]=='0') || (s[1][0]=='0' && s[1][1]=='0' && s[1][2]=='0') || (s[2][0]=='0' && s[2][1]=='0' && s[2][2]=='0') || (s[0][0]=='0' && s[1][1]=='0' && s[2][2]=='0') || (s[0][2]=='0' && s[1][1]=='0' && s[2][0]=='0') || (s[0][0]=='0' && s[1][0]=='0' && s[2][0]=='0') || (s[0][1]=='0' && s[1][1]=='0' && s[2][1]=='0') || (s[0][2]=='0' && s[1][2]=='0' && s[2][2]=='0'))
        {
            cout<<"the second player won\n";
        }
    }
    return 0;
}
